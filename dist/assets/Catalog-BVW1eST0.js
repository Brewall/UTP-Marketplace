import{j as e}from"./bootstrap-BAfCaTjV.js";import{e as R,b as i,L as b}from"./react-vendor-DzKTsnMW.js";import{P as L}from"./ProductCard-Bh8OKuQx.js";import{L as P}from"./index-BnR67Ct2.js";import"./useCart-tiebDccO.js";import"./firebase-DJiCNlSL.js";const k="_catalog_e5ofa_62",A="_pageHeader_e5ofa_67",$="_pageTitle_e5ofa_70",q="_pageSubtitle_e5ofa_82",E="_active_e5ofa_99",B="_controlsCard_e5ofa_102",F="_searchSection_e5ofa_108",H="_searchBox_e5ofa_120",O="_clearSearch_e5ofa_135",V="_filterToggle_e5ofa_151",z="_filtersSection_e5ofa_159",D="_priceRange_e5ofa_163",U="_rangeLabels_e5ofa_170",Y="_filterActions_e5ofa_180",Z="_resultsInfo_e5ofa_187",G="_resultsCount_e5ofa_198",J="_searchInfo_e5ofa_202",K="_categoryInfo_e5ofa_203",Q="_priceInfo_e5ofa_204",W="_noResults_e5ofa_218",X="_noResultsIcon_e5ofa_226",ee="_noResultsActions_e5ofa_241",se="_loadMoreSection_e5ofa_253",ae="_showingText_e5ofa_253",le="_quickCategories_e5ofa_265",oe="_categoryTags_e5ofa_280",ce="_categoryTag_e5ofa_280",re="_productCount_e5ofa_317",a={catalog:k,pageHeader:A,pageTitle:$,pageSubtitle:q,active:E,controlsCard:B,searchSection:F,searchBox:H,clearSearch:O,filterToggle:V,filtersSection:z,priceRange:D,rangeLabels:U,filterActions:Y,resultsInfo:Z,resultsCount:G,searchInfo:J,categoryInfo:K,priceInfo:Q,noResults:W,noResultsIcon:X,noResultsActions:ee,loadMoreSection:se,showingText:ae,quickCategories:le,categoryTags:oe,categoryTag:ce,productCount:re},xe=({products:c,loading:g})=>{const[N,u]=R(),[r,f]=i.useState(N.get("search")||""),[n,j]=i.useState(N.get("category")||"all"),[p,v]=i.useState("name"),[l,x]=i.useState([0,2e3]),[_,C]=i.useState(!1);i.useEffect(()=>{c.length>0},[c,g]);const S=i.useMemo(()=>["all",...[...new Set(c.map(d=>d.category))]],[c]),o=i.useMemo(()=>{if(c.length===0)return{min:0,max:1e3};const s=c.map(d=>d.price);return{min:Math.floor(Math.min(...s)),max:Math.ceil(Math.max(...s))}},[c]);i.useEffect(()=>{x([o.min,o.max])},[o]);const m=i.useMemo(()=>c.filter(t=>{const h=t.name.toLowerCase().includes(r.toLowerCase())||t.description.toLowerCase().includes(r.toLowerCase())||t.seller.toLowerCase().includes(r.toLowerCase()),w=n==="all"||t.category===n,M=t.price>=l[0]&&t.price<=l[1];return h&&w&&M}).sort((t,h)=>{switch(p){case"price-low":return t.price-h.price;case"price-high":return h.price-t.price;case"rating":return(h.rating||0)-(t.rating||0);case"name":default:return t.name.localeCompare(h.name)}}),[c,r,n,p,l]);i.useEffect(()=>{const s={};r&&(s.search=r),n!=="all"&&(s.category=n),u(s)},[r,n,u]);const I=s=>{f(s)},y=()=>{f(""),j("all"),v("name"),x([o.min,o.max]),u({})},T=s=>({Libros:"bi-book-fill",Tecnología:"bi-laptop",Electrónica:"bi-cpu","Material Escolar":"bi-pencil-fill",Accesorios:"bi-bag-fill",Ciencia:"bi-clipboard-data"})[s]||"bi-box";return g?e.jsx("div",{className:a.catalog,children:e.jsx("div",{className:"container",children:e.jsx(P,{})})}):e.jsx("div",{className:a.catalog,children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:a.pageHeader,children:[e.jsx("h1",{className:a.pageTitle,children:"Catálogo de Productos"}),e.jsx("p",{className:a.pageSubtitle,children:"Explora todos los productos disponibles en la comunidad UTP"}),e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(b,{to:"/",children:"Inicio"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Catálogo"})]})})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:a.controlsCard,children:[e.jsxs("div",{className:a.searchSection,children:[e.jsxs("div",{className:a.searchBox,children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar productos, descripción o vendedor...",value:r,onChange:s=>I(s.target.value)}),e.jsx("i",{className:"bi bi-search",style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#999"}}),r&&e.jsx("button",{className:a.clearSearch,onClick:()=>f(""),title:"Limpiar búsqueda",children:"×"})]}),e.jsx("button",{className:`btn btn-outline-primary ${a.filterToggle}`,onClick:()=>C(!_),children:_?"Ocultar Filtros":"Mostrar Filtros"})]}),_&&e.jsxs("div",{className:a.filtersSection,children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{className:"form-label",children:"Categoría"}),e.jsx("select",{className:"form-select",value:n,onChange:s=>j(s.target.value),children:S.map(s=>e.jsx("option",{value:s,children:s==="all"?"Todas las categorías":s},s))})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{className:"form-label",children:"Ordenar por"}),e.jsxs("select",{className:"form-select",value:p,onChange:s=>v(s.target.value),children:[e.jsx("option",{value:"name",children:"Nombre (A-Z)"}),e.jsx("option",{value:"price-low",children:"Precio (Menor a Mayor)"}),e.jsx("option",{value:"price-high",children:"Precio (Mayor a Menor)"}),e.jsx("option",{value:"rating",children:"Mejor Valorados"})]})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Rango de Precio: $",l[0]," - $",l[1]]}),e.jsxs("div",{className:a.priceRange,children:[e.jsx("input",{type:"range",className:"form-range",min:o.min,max:o.max,step:"10",value:l[0],onChange:s=>x([parseInt(s.target.value),l[1]])}),e.jsx("input",{type:"range",className:"form-range",min:o.min,max:o.max,step:"10",value:l[1],onChange:s=>x([l[0],parseInt(s.target.value)])})]}),e.jsxs("div",{className:a.rangeLabels,children:[e.jsxs("small",{children:["Mín: $",o.min]}),e.jsxs("small",{children:["Máx: $",o.max]})]})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:a.filterActions,children:e.jsxs("button",{className:"btn btn-outline-danger",onClick:y,children:[e.jsx("i",{className:"bi bi-trash"})," Limpiar Todos los Filtros"]})})})})]})]})})}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:a.resultsInfo,children:[e.jsxs("div",{className:a.resultsCount,children:[e.jsx("strong",{children:m.length})," de ",e.jsx("strong",{children:c.length})," productos encontrados"]}),r&&e.jsxs("div",{className:a.searchInfo,children:['Búsqueda: "',e.jsx("strong",{children:r}),'"']}),n!=="all"&&e.jsxs("div",{className:a.categoryInfo,children:["Categoría: ",e.jsx("strong",{children:n})]}),(l[0]>o.min||l[1]<o.max)&&e.jsxs("div",{className:a.priceInfo,children:["Precio: ",e.jsxs("strong",{children:["$",l[0]," - $",l[1]]})]})]})})}),m.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:m.map((s,d)=>e.jsx("div",{className:"col-md-6 col-lg-4 col-xl-3 mb-4",children:e.jsx(L,{product:s,animationDelay:d*.05})},s.id))}),e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12 text-center",children:e.jsxs("div",{className:a.loadMoreSection,children:[e.jsxs("p",{className:a.showingText,children:["Mostrando ",e.jsx("strong",{children:m.length})," productos",m.length<c.length&&e.jsxs("span",{children:[" de ",e.jsx("strong",{children:c.length})," disponibles"]})]}),m.length<c.length&&e.jsxs("button",{className:"btn btn-outline-primary",children:[e.jsx("i",{className:"bi bi-file-earmark-text"})," Cargar Más Productos"]})]})})})]}):e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:a.noResults,children:[e.jsx("div",{className:a.noResultsIcon,children:e.jsx("i",{className:"bi bi-search",style:{fontSize:"3rem"}})}),e.jsx("h3",{children:"No se encontraron productos"}),e.jsx("p",{children:r||n!=="all"||l[0]>o.min||l[1]<o.max?"Intenta ajustar tus filtros de búsqueda o limpiar los filtros actuales.":"Actualmente no hay productos disponibles en el catálogo."}),e.jsxs("div",{className:a.noResultsActions,children:[(r||n!=="all"||l[0]>o.min||l[1]<o.max)&&e.jsxs("button",{className:"btn btn-primary",onClick:y,children:[e.jsx("i",{className:"bi bi-trash"})," Limpiar Filtros"]}),e.jsxs(b,{to:"/",className:"btn btn-outline-secondary",children:[e.jsx("i",{className:"bi bi-house"})," Volver al Inicio"]})]})]})})}),!g&&c.length>0&&e.jsx("div",{className:"row mt-5",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:a.quickCategories,children:[e.jsx("h4",{children:"Explorar por Categoría"}),e.jsx("div",{className:a.categoryTags,children:S.filter(s=>s!=="all").map(s=>e.jsxs(b,{to:`/catalog?category=${s}`,className:`${a.categoryTag} ${n===s?a.active:""}`,onClick:()=>{j(s),C(!1)},children:[e.jsx("i",{className:`bi ${T(s)}`})," ",s,e.jsxs("span",{className:a.productCount,children:["(",c.filter(d=>d.category===s).length,")"]})]},s))})]})})}),!1]})})};export{xe as default};
