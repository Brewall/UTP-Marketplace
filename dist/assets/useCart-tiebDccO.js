import{b as C}from"./react-vendor-DzKTsnMW.js";import{g as q,s as c}from"./index-BnR67Ct2.js";const x=()=>{const[i,s]=C.useState([]),u=()=>{try{const t=q("cart");return t===0||t===null||t===void 0?[]:Array.isArray(t)?t:[]}catch{return[]}},o=t=>{const r=Array.isArray(t)?t:[],e=r.reduce((a,n)=>a+(n.quantity||0),0);c("cartCount",e),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{count:e,items:r}}))},y=t=>{const r=u(),e=r.findIndex(n=>n.id===t.id);let a;return e>=0?a=r.map((n,p)=>p===e?{...n,quantity:n.quantity+(t.quantity||1)}:n):a=[...r,{...t,quantity:t.quantity||1}],s(a),c("cart",a),o(a),a},d=t=>{const e=u().filter(a=>a.id!==t);return s(e),c("cart",e),o(e),e},m=(t,r)=>{if(r<1)return d(t);const a=u().map(n=>n.id===t?{...n,quantity:r}:n);return s(a),c("cart",a),o(a),a},f=()=>{const t=[];return s(t),c("cart",t),o(t),t},g=()=>i.reduce((t,r)=>t+(r.quantity||0),0),l=()=>i.reduce((t,r)=>t+r.price*(r.quantity||1),0);return C.useEffect(()=>{const t=u();s(t),o(t)},[]),{cartItems:i,addToCart:y,removeFromCart:d,updateQuantity:m,clearCart:f,getCartCount:g,getCartTotal:l,updateCartCounter:o}};export{x as u};
